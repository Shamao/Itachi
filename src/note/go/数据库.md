####  #### 1. 连接mysql

- 获取go-sql-driver/mysql

 ```shell
$ go get -u github.com/go-sql-driver/mysql
 ```

- 示例

```go
  import "database/sql"
  import _ "github.com/go-sql-driver/mysql"
  
  db, err := sql.Open("mysql", "username:password@protocol(address)/dbname?param=value)
```

  

#### 数据库查询

```go

func (user *User) query(db *DB) {
	rows, err := db.Query("select * from user where id = ?", 1)
	if err != nil {
		log.Fatal(err)
	}

	for rows.Next() {
		if err != nil {
			log.Fatal(err)
		}

		err = rows.Scan(&user.id, &user.name, &user.password, &user.age)
		if err != nil {
			log.Fatal(err)
		}

		log.Println(user)
	}
}
```





#### 3. sql 执行

```go
func (user User) insertUser(db *DB) {
	Stmt, err := db.Prepare("insert into user(name, password, age) values (?,?,?) ")
	if err != nil {
		log.Fatal(err)
	}
	res, err := Stmt.Exec(user.name, user.password, user.age)
	if err != nil {
		log.Fatal(err)
	}

	lastId, err := res.LastInsertId()
	if err != nil {
		log.Fatal(err)
	}
	rowCnt, err := res.RowsAffected()
	if err != nil {
		log.Fatal(err)
	}

	fmt.Print(lastId, rowCnt)
}
```

